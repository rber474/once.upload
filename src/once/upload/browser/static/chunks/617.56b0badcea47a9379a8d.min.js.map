{"version":3,"file":"chunks/617.56b0badcea47a9379a8d.min.js","mappings":"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","sources":["webpack://upload/./node_modules/@patternslib/patternslib/src/core/mockup-parser.js","webpack://upload/./node_modules/@patternslib/patternslib/src/core/base.js","webpack://upload/./node_modules/@plone/mockup/src/core/i18n.js","webpack://upload/./node_modules/@plone/mockup/src/core/i18n-wrapper.js","webpack://upload/./node_modules/@plone/mockup/node_modules/@patternslib/patternslib/src/core/logging.js","webpack://upload/./node_modules/@plone/mockup/src/core/utils.js"],"sourcesContent":["import $ from \"jquery\";\n\nvar parser = {\n    getOptions($el, patternName, options) {\n        /* This is the Mockup parser. An alternative parser for Patternslib\n         * patterns.\n         *\n         * NOTE: Use of the Mockup parser is discouraged and is added here for\n         * legacy support for the Plone Mockup project.\n         *\n         * It parses a DOM element for pattern configuration options.\n         */\n        options = options || {};\n        // get options from parent element first, stop if element tag name is 'body'\n        if ($el.length !== 0 && !$.nodeName($el[0], \"body\")) {\n            options = this.getOptions($el.parent(), patternName, options);\n        }\n        // collect all options from element\n        let elOptions = {};\n        if ($el.length !== 0) {\n            elOptions = $el.data(\"pat-\" + patternName);\n            if (elOptions) {\n                // parse options if string\n                if (typeof elOptions === \"string\") {\n                    const tmpOptions = {};\n                    $.each(elOptions.split(\";\"), function (i, item) {\n                        item = item.split(\":\");\n                        item.reverse();\n                        let key = item.pop();\n                        key = key.replace(/^\\s+|\\s+$/g, \"\"); // trim\n                        item.reverse();\n                        let value = item.join(\":\");\n                        value = value.replace(/^\\s+|\\s+$/g, \"\"); // trim\n                        tmpOptions[key] = value;\n                    });\n                    elOptions = tmpOptions;\n                }\n            }\n        }\n        return $.extend(true, {}, options, elOptions);\n    },\n};\n\nexport default parser;\n","/**\n * A Base pattern for creating scoped patterns. It's similar to Backbone's\n * Model class. The advantage of this approach is that each instance of a\n * pattern has its own local scope (closure).\n *\n * A new instance is created for each DOM element on which a pattern applies.\n *\n * You can assign values, such as $el, to `this` for an instance and they\n * will remain unique to that instance.\n *\n * Older Patternslib patterns on the other hand have a single global scope for\n * all DOM elements.\n */\nimport $ from \"jquery\";\nimport Registry from \"./registry\";\nimport logging from \"./logging\";\nimport mockupParser from \"./mockup-parser\";\n\nconst log = logging.getLogger(\"Patternslib Base\");\n\nconst initBasePattern = function ($el, options, trigger) {\n    if (!$el.jquery) {\n        $el = $($el);\n    }\n    const name = this.prototype.name;\n    const plog = logging.getLogger(`pat.${name}`);\n    let pattern = $el.data(`pattern-${name}`);\n    if (pattern === undefined && Registry.patterns[name]) {\n        try {\n            // Immediately set the pattern instance to the temporary value\n            // ``initializing`` before the async Base constructor is setting\n            // the value later.\n            // This prevents re-init the pattern on this element on multiple\n            // initialization calls..\n            $el.data(`pattern-${name}`, \"initializing\");\n            options =\n                this.prototype.parser === \"mockup\"\n                    ? mockupParser.getOptions($el, name, options)\n                    : options;\n            pattern = new Registry.patterns[name]($el, options, trigger);\n        } catch (e) {\n            plog.error(`Failed while initializing ${name} pattern.`, e);\n        }\n    }\n    return pattern;\n};\n\nconst Base = async function ($el, options, trigger) {\n    if (($el?.jquery && $el.length === 0) || !$el) {\n        log.warn(\"No element given to pattern.\");\n        return;\n    }\n    if (!$el.jquery) {\n        $el = $($el);\n    }\n    this.$el = $el;\n    this.el = $el[0];\n    this.options = $.extend(true, {}, this.defaults || {}, options || {});\n\n    this.emit(\"pre-init\");\n\n    await this.init($el, options, trigger);\n\n    // Store pattern instance on element\n    this.$el.data(`pattern-${this.name}`, this);\n    this.el[`pattern-${this.name}`] = this;\n\n    this.emit(\"init\");\n};\n\nBase.prototype = {\n    constructor: Base,\n    on(eventName, eventCallback) {\n        this.$el.on(`${eventName}.${this.name}.patterns`, eventCallback);\n    },\n    one(eventName, eventCallback) {\n        this.$el.one(`${eventName}.${this.name}.patterns`, eventCallback);\n    },\n    emit(eventName, args) {\n        // args should be a list\n        if (args === undefined) {\n            args = [];\n        }\n        this.$el.trigger(`${eventName}.${this.name}.patterns`, args);\n    },\n};\n\nBase.extend = function (patternProps) {\n    /* Helper function to correctly set up the prototype chain for new patterns.\n     */\n    const parent = this;\n    let child;\n\n    // Check that the required configuration properties are given.\n    if (!patternProps) {\n        throw new Error(\n            \"Pattern configuration properties required when calling Base.extend\"\n        );\n    }\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (Object.hasOwnProperty.call(patternProps, \"constructor\")) {\n        child = patternProps.constructor;\n    } else {\n        child = function () {\n            parent.apply(this, arguments);\n        };\n    }\n\n    // Allow patterns to be extended indefinitely\n    child.extend = Base.extend;\n\n    // Static properties required by the Patternslib registry\n    child.init = initBasePattern;\n    child.jquery_plugin = true;\n    child.trigger = patternProps.trigger;\n    child.parser = patternProps?.parser || null;\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function () {\n        this.constructor = child;\n    };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate();\n\n    // Add pattern's configuration properties (instance properties) to the subclass,\n    $.extend(true, child.prototype, patternProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    // Register the pattern in the Patternslib registry.\n    if (!patternProps.name) {\n        log.warn(\"This pattern without a name attribute will not be registered!\");\n    } else if (!patternProps.trigger) {\n        log.warn(\n            `The pattern ${patternProps.name} does not have a trigger attribute, it will not be registered.`\n        );\n    } else if (patternProps.autoregister !== false) {\n        Registry.register(child, patternProps.name);\n    }\n    return child;\n};\n\nexport default Base;\n","/* i18n integration. This is forked from jarn.jsi18n\n *\n * This is a singleton.\n * Configuration is done on the body tag data-i18ncatalogurl attribute\n *     <body data-i18ncatalogurl=\"/plonejsi18n\">\n *\n *  Or, it'll default to \"/plonejsi18n\"\n */\n\nimport $ from \"jquery\";\n\nconst i18n = function () {\n    var self = this;\n    self.baseUrl = $(\"body\").attr(\"data-i18ncatalogurl\");\n    self.currentLanguage = $(\"html\").attr(\"lang\") || \"en\";\n\n    // Fix for country specific languages\n    if (self.currentLanguage.split(\"-\").length > 1) {\n        self.currentLanguage =\n            self.currentLanguage.split(\"-\")[0] +\n            \"_\" +\n            self.currentLanguage.split(\"-\")[1].toUpperCase();\n    }\n\n    self.storage = null;\n    self.catalogs = {};\n    self.ttl = 24 * 3600 * 1000;\n\n    // Internet Explorer 8 does not know Date.now() which is used in e.g. loadCatalog, so we \"define\" it\n    if (!Date.now) {\n        Date.now = function () {\n            return new Date().valueOf();\n        };\n    }\n\n    try {\n        if (\n            \"localStorage\" in window &&\n            window.localStorage !== null &&\n            \"JSON\" in window &&\n            window.JSON !== null\n        ) {\n            self.storage = window.localStorage;\n        }\n    } catch (e) {\n        console.log(\"Failed to set local storage\");\n    }\n\n    self.configure = function (config) {\n        for (var key in config) {\n            self[key] = config[key];\n        }\n    };\n\n    self._setCatalog = function (domain, language, catalog) {\n        if (domain in self.catalogs) {\n            self.catalogs[domain][language] = catalog;\n        } else {\n            self.catalogs[domain] = {};\n            self.catalogs[domain][language] = catalog;\n        }\n    };\n\n    self._storeCatalog = function (domain, language, catalog) {\n        var key = domain + \"-\" + language;\n        if (self.storage !== null && catalog !== null) {\n            self.storage.setItem(key, JSON.stringify(catalog));\n            self.storage.setItem(key + \"-updated\", Date.now());\n        }\n    };\n\n    self.getUrl = function (domain, language) {\n        return self.baseUrl + \"?domain=\" + domain + \"&language=\" + language;\n    };\n\n    self.loadCatalog = function (domain, language) {\n        if (language === undefined) {\n            language = self.currentLanguage;\n        }\n        if (self.storage !== null) {\n            var key = domain + \"-\" + language;\n            if (key in self.storage) {\n                if (\n                    Date.now() - parseInt(self.storage.getItem(key + \"-updated\"), 10) <\n                    self.ttl\n                ) {\n                    var catalog = JSON.parse(self.storage.getItem(key));\n                    self._setCatalog(domain, language, catalog);\n                    return;\n                }\n            }\n        }\n        if (!self.baseUrl) {\n            return;\n        }\n        $.getJSON(self.getUrl(domain, language), function (catalog) {\n            if (catalog === null) {\n                return;\n            }\n            self._setCatalog(domain, language, catalog);\n            self._storeCatalog(domain, language, catalog);\n        });\n    };\n\n    self.MessageFactory = function (domain, language) {\n        language = language || self.currentLanguage;\n        return function translate(msgid, keywords) {\n            var msgstr;\n            if (\n                domain in self.catalogs &&\n                language in self.catalogs[domain] &&\n                msgid in self.catalogs[domain][language]\n            ) {\n                msgstr = self.catalogs[domain][language][msgid];\n            } else {\n                msgstr = msgid;\n            }\n            if (keywords) {\n                var regexp, keyword;\n                for (keyword in keywords) {\n                    if (Object.prototype.hasOwnProperty.call(keywords, keyword)) {\n                        regexp = new RegExp(\"\\\\$\\\\{\" + keyword + \"\\\\}\", \"g\");\n                        msgstr = msgstr.replace(regexp, keywords[keyword]);\n                    }\n                }\n            }\n            return msgstr;\n        };\n    };\n};\n\nexport default i18n;\n","/* i18n integration.\n *\n * This is a singleton.\n * Configuration is done on the body tag data-i18ncatalogurl attribute\n *     <body data-i18ncatalogurl=\"/plonejsi18n\">\n *\n *  Or, it'll default to \"/plonejsi18n\"\n */\n\nimport I18N from \"./i18n\";\n\n// we're creating a singleton here so we can potentially\n// delay the initialization of the translate catalog\n// until after the dom is available\nlet _translation_domains = {\n    plone: null,\n    widgets: null,\n};\n\nconst translate = function (domain, msgid, keywords) {\n    if (_translation_domains[domain] === null) {\n        var i18n = new I18N();\n        i18n.loadCatalog(domain);\n        _translation_domains[domain] = i18n.MessageFactory(domain);\n    }\n    return _translation_domains[domain](msgid, keywords);\n};\n\nconst translate_widgets = function (msgid, keywords) {\n    return translate(\"widgets\", msgid, keywords);\n};\n\nconst translate_plone = function (msgid, keywords) {\n    return translate(\"plone\", msgid, keywords);\n};\n\n// backwards compatibilty: \"widgets\" domain is default factory\nexport default translate_widgets;\n\n// explicit export of translation domain factories\nexport { translate_widgets, translate_plone };\n","/**\n * Patterns logging - minimal logging framework\n *\n * Copyright 2012 Simplon B.V.\n */\n\n// source: https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        if (typeof this !== \"function\") {\n            // closest thing possible to the ECMAScript 5 internal IsCallable function\n            throw new TypeError(\n                \"Function.prototype.bind - what is trying to be bound is not callable\"\n            );\n        }\n\n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            fNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(\n                    this instanceof fNOP && oThis ? this : oThis,\n                    aArgs.concat(Array.prototype.slice.call(arguments))\n                );\n            };\n        fNOP.prototype = this.prototype;\n        fBound.prototype = new fNOP();\n\n        return fBound;\n    };\n}\n\nvar root, // root logger instance\n    writer; // writer instance, used to output log entries\n\nvar Level = {\n    DEBUG: 10,\n    INFO: 20,\n    WARN: 30,\n    ERROR: 40,\n    FATAL: 50,\n};\n\nfunction ConsoleWriter() {}\n\nConsoleWriter.prototype = {\n    output: function (log_name, level, messages) {\n        if (log_name) messages.unshift(log_name + \":\");\n        if (level <= Level.DEBUG) {\n            // console.debug exists but is deprecated\n            messages.unshift(\"[DEBUG]\");\n            console.log.apply(console, messages);\n        } else if (level <= Level.INFO) console.info.apply(console, messages);\n        else if (level <= Level.WARN) console.warn.apply(console, messages);\n        else console.error.apply(console, messages);\n    },\n};\n\nfunction Logger(name, parent) {\n    this._loggers = {};\n    this.name = name || \"\";\n    this._parent = parent || null;\n    if (!parent) {\n        this._enabled = true;\n        this._level = Level.WARN;\n    }\n}\n\nLogger.prototype = {\n    getLogger: function (name) {\n        var path = name.split(\".\"),\n            root = this,\n            route = this.name ? [this.name] : [];\n        while (path.length) {\n            var entry = path.shift();\n            route.push(entry);\n            if (!(entry in root._loggers))\n                root._loggers[entry] = new Logger(route.join(\".\"), root);\n            root = root._loggers[entry];\n        }\n        return root;\n    },\n\n    _getFlag: function (flag) {\n        var context = this;\n        flag = \"_\" + flag;\n        while (context !== null) {\n            if (context[flag] !== undefined) return context[flag];\n            context = context._parent;\n        }\n        return null;\n    },\n\n    setEnabled: function (state) {\n        this._enabled = !!state;\n    },\n\n    isEnabled: function () {\n        this._getFlag(\"enabled\");\n    },\n\n    setLevel: function (level) {\n        if (typeof level === \"number\") this._level = level;\n        else if (typeof level === \"string\") {\n            level = level.toUpperCase();\n            if (level in Level) this._level = Level[level];\n        }\n    },\n\n    getLevel: function () {\n        return this._getFlag(\"level\");\n    },\n\n    log: function (level, messages) {\n        if (\n            !messages.length ||\n            !this._getFlag(\"enabled\") ||\n            level < this._getFlag(\"level\")\n        )\n            return;\n        messages = Array.prototype.slice.call(messages);\n        writer.output(this.name, level, messages);\n    },\n\n    debug: function () {\n        this.log(Level.DEBUG, arguments);\n    },\n\n    info: function () {\n        this.log(Level.INFO, arguments);\n    },\n\n    warn: function () {\n        this.log(Level.WARN, arguments);\n    },\n\n    error: function () {\n        this.log(Level.ERROR, arguments);\n    },\n\n    fatal: function () {\n        this.log(Level.FATAL, arguments);\n    },\n};\n\nfunction getWriter() {\n    return writer;\n}\n\nfunction setWriter(w) {\n    writer = w;\n}\n\nsetWriter(new ConsoleWriter());\n\nroot = new Logger();\n\nvar logconfig = /loglevel(|-[^=]+)=([^&]+)/g,\n    match;\n\nwhile ((match = logconfig.exec(window.location.search)) !== null) {\n    var logger = match[1] === \"\" ? root : root.getLogger(match[1].slice(1));\n    logger.setLevel(match[2].toUpperCase());\n}\n\nvar api = {\n    Level: Level,\n    getLogger: root.getLogger.bind(root),\n    setEnabled: root.setEnabled.bind(root),\n    isEnabled: root.isEnabled.bind(root),\n    setLevel: root.setLevel.bind(root),\n    getLevel: root.getLevel.bind(root),\n    debug: root.debug.bind(root),\n    info: root.info.bind(root),\n    warn: root.warn.bind(root),\n    error: root.error.bind(root),\n    fatal: root.fatal.bind(root),\n    getWriter: getWriter,\n    setWriter: setWriter,\n};\n\nexport default api;\n","import $ from \"jquery\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\n\nconst logger = logging.getLogger(\"core utils\");\n\nvar QueryHelper = function (options) {\n    /* if pattern argument provided, it can implement the interface of:\n     *    - browsing: boolean if currently browsing\n     *    - currentPath: string of current path to apply to search if browsing\n     *    - basePath: default path to provide if no subpath used\n     */\n\n    var self = this;\n    var defaults = {\n        pattern: null, // must be passed in\n        vocabularyUrl: null,\n        searchParam: \"SearchableText\", // query string param to pass to search url\n        pathOperator: \"plone.app.querystring.operation.string.path\",\n        attributes: [\"UID\", \"Title\", \"Description\", \"getURL\", \"portal_type\"],\n        batchSize: 10, // number of results to retrive\n        baseCriteria: [],\n        sort_on: \"is_folderish\",\n        sort_order: \"reverse\",\n        pathDepth: 1,\n    };\n    self.options = $.extend({}, defaults, options);\n\n    self.pattern = self.options.pattern;\n    if (self.pattern === undefined || self.pattern === null) {\n        self.pattern = {\n            browsing: false,\n            basePath: \"/\",\n        };\n    }\n\n    if (self.options.url && !self.options.vocabularyUrl) {\n        self.options.vocabularyUrl = self.options.url;\n    } else if (self.pattern.vocabularyUrl) {\n        self.options.vocabularyUrl = self.pattern.vocabularyUrl;\n    }\n    self.valid = Boolean(self.options.vocabularyUrl);\n\n    self.getBatch = function (page) {\n        return {\n            page: page ? page : 1,\n            size: self.options.batchSize,\n        };\n    };\n\n    self.getCurrentPath = function () {\n        var pattern = self.pattern;\n        var currentPath;\n        /* If currentPath is set on the QueryHelper object, use that first.\n         * Then, check on the pattern.\n         * Finally, see if it is a function and call it if it is.\n         */\n        if (self.currentPath) {\n            currentPath = self.currentPath;\n        } else {\n            currentPath = pattern.currentPath;\n        }\n        if (typeof currentPath === \"function\") {\n            currentPath = currentPath();\n        }\n        var path = currentPath;\n        if (!path) {\n            if (pattern.basePath) {\n                path = pattern.basePath;\n            } else if (pattern.options.basePath) {\n                path = pattern.options.basePath;\n            } else {\n                path = \"/\";\n            }\n        }\n        return path;\n    };\n\n    self.getCriterias = function (term, searchOptions) {\n        if (searchOptions === undefined) {\n            searchOptions = {};\n        }\n        searchOptions = $.extend(\n            {},\n            {\n                useBaseCriteria: true,\n                additionalCriterias: [],\n            },\n            searchOptions\n        );\n\n        var criterias = [];\n        if (searchOptions.useBaseCriteria) {\n            criterias = self.options.baseCriteria.slice(0);\n        }\n        if (term) {\n            term += \"*\";\n            criterias.push({\n                i: self.options.searchParam,\n                o: \"plone.app.querystring.operation.string.contains\",\n                v: term,\n            });\n        }\n        if (searchOptions.searchPath) {\n            criterias.push({\n                i: \"path\",\n                o: self.options.pathOperator,\n                v: searchOptions.searchPath + \"::\" + self.options.pathDepth,\n            });\n        } else if (self.pattern.browsing) {\n            criterias.push({\n                i: \"path\",\n                o: self.options.pathOperator,\n                v: self.getCurrentPath() + \"::\" + self.options.pathDepth,\n            });\n        }\n        criterias = criterias.concat(searchOptions.additionalCriterias);\n        return criterias;\n    };\n\n    self.getQueryData = function (term, page) {\n        var data = {\n            query: JSON.stringify({\n                criteria: self.getCriterias(term),\n                sort_on: self.options.sort_on,\n                sort_order: self.options.sort_order,\n            }),\n            attributes: JSON.stringify(self.options.attributes),\n        };\n        if (page) {\n            data.batch = JSON.stringify(self.getBatch(page));\n        }\n        return data;\n    };\n\n    self.getUrl = function () {\n        var url = self.options.vocabularyUrl;\n        if (url.indexOf(\"?\") === -1) {\n            url += \"?\";\n        } else {\n            url += \"&\";\n        }\n        return url + $.param(self.getQueryData());\n    };\n\n    self.selectAjax = function () {\n        return {\n            url: self.options.vocabularyUrl,\n            dataType: \"JSON\",\n            quietMillis: 100,\n            data: function (term, page) {\n                return self.getQueryData(term, page);\n            },\n            results: function (data, page) {\n                var more = page * 10 < data.total; // whether or not there are more results available\n                // notice we return the value of more so Select2 knows if more results can be loaded\n                return {\n                    results: data.results,\n                    more: more,\n                };\n            },\n        };\n    };\n\n    self.search = function (term, operation, value, callback, useBaseCriteria, type) {\n        if (useBaseCriteria === undefined) {\n            useBaseCriteria = true;\n        }\n        if (type === undefined) {\n            type = \"GET\";\n        }\n        var criteria = [];\n        if (useBaseCriteria) {\n            criteria = self.options.baseCriteria.slice(0);\n        }\n        criteria.push({\n            i: term,\n            o: operation,\n            v: value,\n        });\n        var data = {\n            query: JSON.stringify({\n                criteria: criteria,\n            }),\n            attributes: JSON.stringify(self.options.attributes),\n        };\n        $.ajax({\n            url: self.options.vocabularyUrl,\n            dataType: \"JSON\",\n            data: data,\n            type: type,\n            success: callback,\n        });\n    };\n\n    return self;\n};\n\nvar Loading = function (options) {\n    /*\n     * Options:\n     *   backdrop(pattern): if you want to have the progress indicator work\n     *                      seamlessly with backdrop pattern\n     *   zIndex(integer or function): to override default z-index used\n     */\n    var self = this;\n    self.className = \"spinner-border\";\n    var defaults = {\n        backdrop: null,\n        zIndex: 10005, // can be a function\n    };\n    if (!options) {\n        options = {};\n    }\n    self.options = $.extend({}, defaults, options);\n\n    self.init = function () {\n        self.$el = $(\".\" + self.className);\n        if (self.$el.length === 0) {\n            self.$el = $(\"<div><div></div></div>\");\n            self.$el.addClass(self.className).hide().appendTo(\"body\");\n        }\n    };\n\n    self.show = function (closable) {\n        self.init();\n        self.$el.show();\n        self.$el.css(\"position\", \"absolute\");\n        self.$el.css(\"top\", \"50%\");\n        self.$el.css(\"left\", \"50%\");\n        var zIndex = self.options.zIndex;\n        if (typeof zIndex === \"function\") {\n            zIndex = Math.max(zIndex(), 10005);\n        } else {\n            // go through all modals and backdrops and make sure we have a higher\n            // z-index to use\n            zIndex = 10005;\n            $(\".modal-wrapper,.-modal-backdrop\").each(function () {\n                zIndex = Math.max(zIndex, $(this).css(\"zIndex\") || 10005);\n            });\n            zIndex += 1;\n        }\n        self.$el.css(\"zIndex\", zIndex);\n\n        if (closable === undefined) {\n            closable = true;\n        }\n        if (self.options.backdrop) {\n            self.options.backdrop.closeOnClick = closable;\n            self.options.backdrop.closeOnEsc = closable;\n            self.options.backdrop.init();\n            self.options.backdrop.show();\n        }\n    };\n\n    self.hide = function () {\n        self.init();\n        self.$el.hide();\n    };\n\n    return self;\n};\n\nvar getAuthenticator = function () {\n    var $el = $('input[name=\"_authenticator\"]');\n    if ($el.length === 0) {\n        $el = $('a[href*=\"_authenticator\"]');\n        if ($el.length > 0) {\n            return $el.attr(\"href\").split(\"_authenticator=\")[1];\n        }\n        return \"\";\n    } else {\n        return $el.val();\n    }\n};\n\nvar generateId = function (prefix) {\n    if (prefix === undefined) {\n        prefix = \"id\";\n    }\n    return (\n        prefix +\n        Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1)\n    );\n};\n\nvar setId = function ($el, prefix) {\n    if (prefix === undefined) {\n        prefix = \"id\";\n    }\n    var id = $el.attr(\"id\");\n    if (id === undefined) {\n        id = generateId(prefix);\n    } else {\n        /* hopefully we don't screw anything up here... changing the id\n         * in some cases so we get a decent selector */\n        id = id.replace(/\\./g, \"-\");\n    }\n    $el.attr(\"id\", id);\n    return id;\n};\n\nvar getWindow = function () {\n    var win = window;\n    if (win.parent !== window) {\n        win = win.parent;\n    }\n    return win;\n};\n\nvar parseBodyTag = function (txt) {\n    return $(\n        /<body[^>]*>[^]*<\\/body>/im\n            .exec(txt)[0]\n            .replace(\"<body\", \"<div\")\n            .replace(\"</body>\", \"</div>\")\n    )\n        .eq(0)\n        .html();\n};\n\nvar featureSupport = {\n    /* Well tested feature support for things we use in mockup.\n     * All gathered from: http://diveintohtml5.info/everything.html\n     * Alternative to using some form of modernizr.\n     */\n    dragAndDrop: function () {\n        return \"draggable\" in document.createElement(\"span\");\n    },\n    fileApi: function () {\n        return typeof FileReader != \"undefined\";\n    },\n    history: function () {\n        return !!(window.history && window.history.pushState);\n    },\n};\n\nvar bool = function (val) {\n    if (typeof val === \"string\") {\n        val = val.trim(val).toLowerCase();\n    }\n    return [\"false\", false, \"0\", 0, \"\", undefined, null].indexOf(val) === -1;\n};\n\nvar escapeHTML = function (val) {\n    return $(\"<div/>\").text(val).html();\n};\n\nvar removeHTML = function (val) {\n    return val.replace(/<[^>]+>/gi, \"\");\n};\n\nvar storage = {\n    // Simple local storage wrapper, which doesn't break down if it's not available.\n    get: function (name) {\n        if (window.localStorage) {\n            var val = window.localStorage[name];\n            return typeof val === \"string\" ? JSON.parse(val) : undefined;\n        }\n    },\n\n    set: function (name, val) {\n        if (window.localStorage) {\n            window.localStorage[name] = JSON.stringify(val);\n        }\n    },\n};\n\nexport const ICON_CACHE = new Map();\n\n/**\n * Return a <svg> element from a icon name.\n *\n * Example:\n *     const dropdownIcon: await utils.resolveIcon('plone-settings');\n *\n * @param {String} name - The name of the icon as stored in the plone registry.\n * @returns {String} - The SVG markup for the icon.\n */\nconst resolveIcon = async function (name) {\n    // if (name === 'plone.icon.plone-rearrange'){debugger}\n    const icon_lookup_name = `plone.icon.${name}`;\n    const cache_key = icon_lookup_name;\n\n    // ATTENTION: async/await trick ahead!\n    if (!ICON_CACHE.has(cache_key)) {\n        // 1) Immediately set the asynchronous function call to _resolve_icon in the icon cache.\n        // Subsequent calls will not re-set this because the cache_key is already set.\n        ICON_CACHE.set(cache_key, _resolve_icon());\n        logger.debug(`Loading icon \"${icon_lookup_name}\"`);\n    }\n    // 2) Await the promise for resolving the icon or just return the icon itself.\n    return await ICON_CACHE.get(cache_key);\n\n    async function _resolve_icon() {\n        // Do the actual loading.\n\n        let icon = \"\";\n        const base_url = document.body.getAttribute(\"data-portal-url\");\n        if (base_url) {\n            const url = base_url + \"/@@iconresolver\";\n            if (url) {\n                try {\n                    // Fetch timeout\n                    const controller = new AbortController();\n                    // 5 second timeout:\n                    setTimeout(() => controller.abort(), 5000);\n\n                    const resp = await fetch(`${url}/${name}`, {\n                        signal: controller.signal,\n                    });\n                    icon = await resp.text();\n                } catch (e) {\n                    logger.warn(`Loading icon \"${name}\" from URL ${url} failed.`);\n                    console.warn(e);\n                }\n            }\n        }\n        if (!icon) {\n            // fallback\n            name = icon_lookup_name;\n            try {\n                import(\"../styles/icons.scss\");\n                const iconmap = await import(\"../iconmap.json\");\n                const parts = iconmap[name]?.split?.(\"/\");\n                if (parts[0].includes(\"bootstrap-icons\")) {\n                    icon = await import(`bootstrap-icons/icons/${parts[1]}`);\n                    icon = icon?.default;\n                }\n            } catch (e) {\n                // import error\n                logger.warn(`Loading icon \"${icon_lookup_name}\" failed from fallback.`);\n                console.warn(e);\n            }\n        }\n        return icon;\n    }\n};\n\nexport default {\n    bool: bool,\n    escapeHTML: escapeHTML,\n    removeHTML: removeHTML,\n    featureSupport: featureSupport,\n    generateId: generateId,\n    getAuthenticator: getAuthenticator,\n    getWindow: getWindow,\n    Loading: Loading,\n    loading: new Loading(), // provide default loader\n    parseBodyTag: parseBodyTag,\n    QueryHelper: QueryHelper,\n    resolveIcon: resolveIcon,\n    setId: setId,\n    storage: storage,\n};\n"],"names":["getOptions","$el","patternName","options","length","$","this","parent","elOptions","data","tmpOptions","split","i","item","reverse","key","pop","replace","value","join","log","logging","getLogger","initBasePattern","trigger","jquery","name","prototype","plog","pattern","undefined","Registry","patterns","parser","mockupParser","e","error","Base","async","warn","el","defaults","emit","init","constructor","on","eventName","eventCallback","one","args","extend","patternProps","child","Error","Object","hasOwnProperty","call","apply","arguments","jquery_plugin","Surrogate","__super__","autoregister","register","self","baseUrl","attr","currentLanguage","toUpperCase","storage","catalogs","ttl","Date","now","valueOf","window","localStorage","JSON","console","configure","config","_setCatalog","domain","language","catalog","_storeCatalog","setItem","stringify","getUrl","loadCatalog","parseInt","getItem","parse","MessageFactory","msgid","keywords","msgstr","regexp","keyword","RegExp","_translation_domains","plone","widgets","translate","i18n","I18N","root","writer","Function","bind","oThis","TypeError","aArgs","Array","slice","fToBind","fNOP","fBound","concat","Level","DEBUG","INFO","WARN","ERROR","FATAL","ConsoleWriter","Logger","_loggers","_parent","_enabled","_level","setWriter","w","output","log_name","level","messages","unshift","info","path","route","entry","shift","push","_getFlag","flag","context","setEnabled","state","isEnabled","setLevel","getLevel","debug","fatal","match","logconfig","exec","location","search","logger","getWriter","Loading","className","backdrop","zIndex","addClass","hide","appendTo","show","closable","css","Math","max","each","closeOnClick","closeOnEsc","generateId","prefix","floor","random","toString","substring","featureSupport","dragAndDrop","document","createElement","fileApi","FileReader","history","pushState","get","val","set","ICON_CACHE","Map","bool","trim","toLowerCase","indexOf","escapeHTML","text","html","removeHTML","getAuthenticator","getWindow","win","loading","parseBodyTag","txt","eq","QueryHelper","vocabularyUrl","searchParam","pathOperator","attributes","batchSize","baseCriteria","sort_on","sort_order","pathDepth","browsing","basePath","url","valid","Boolean","getBatch","page","size","getCurrentPath","currentPath","getCriterias","term","searchOptions","criterias","useBaseCriteria","additionalCriterias","o","v","searchPath","getQueryData","query","criteria","batch","selectAjax","dataType","quietMillis","results","more","total","operation","callback","type","success","resolveIcon","icon_lookup_name","cache_key","has","icon","base_url","body","getAttribute","controller","AbortController","setTimeout","abort","resp","fetch","signal","iconmap","parts","includes","default","_resolve_icon","setId","id"],"sourceRoot":""}